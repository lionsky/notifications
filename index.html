<!DOCTYPE html>
<html>
  <head>
    <title>WebViewNotifications</title>
  </head>
  <body>
    <table>
      <tr>
        <td>hartbeat:</td>
        <td width="250px" id="hartbeat"></td>
      </tr>
    </table>
  
    <script type="text/javascript">
      var beat="";
      function hartbeat() {
        beat=beat+".";
        if (beat==="....") beat="";
        document.getElementById("hartbeat").innerHTML = beat;
        setTimeout(hartbeat, 2000);
      }
      
      hartbeat();
      
      /*
      function showNotification(title, body, icon, data) {
        var notificationOptions = {
           body: body,
           icon: icon ? icon : 'images/touch/chrome-touch-icon-192x192.png',
           tag: 'simple-push-demo-notification',
           data: data
        };
        self.registration.showNotification(title, notificationOptions);
        return;
      }
      */
      
      navigator.serviceWorker.register('sw.js', {scope: '/'}).then(function(registration) {
        console.log('ServiceWorker registration successful with scope: ', registration.scope);
        alert('registr success');
      }).catch(function(err) {
        console.log('ServiceWorker registration failed: ', err);
        alert('registr fail');
      });
      /*
      Notification.requestPermission(function(status) {
                alert('permission: '+status);
                new Notification("Hallo");
      });
      */
      
         navigator.serviceWorker.ready.then(function(serviceWorkerRegistration) {
           alert("ha");
           serviceWorkerRegistration.showNotification("bla","bla",null,"bla");
         });
//      showNotification("bla");
     //ServiceWorkerRegistration.showNotification("bla").then(function(){ alert("hi"); });
    </script>

  </body>
</html>
